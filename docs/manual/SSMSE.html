<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Options for run_SSMSE | SSMSE user manual</title>
  <meta name="description" content="This is a user manual for the SSMSE package. It includes documentation and examples." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Options for run_SSMSE | SSMSE user manual" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://nmfs-fish-tools.github.io/SSMSE/manual/" />
  
  <meta property="og:description" content="This is a user manual for the SSMSE package. It includes documentation and examples." />
  <meta name="github-repo" content="nmfs-fish-tools/SSMSE" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Options for run_SSMSE | SSMSE user manual" />
  
  <meta name="twitter:description" content="This is a user manual for the SSMSE package. It includes documentation and examples." />
  

<meta name="author" content="Kathryn Doering and Nathan Vaughan" />


<meta name="date" content="2020-12-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="simple.html"/>
<link rel="next" href="helper.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-session-information"><i class="fa fa-check"></i>R session information</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#purpose"><i class="fa fa-check"></i><b>1.1</b> Purpose</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#funs"><i class="fa fa-check"></i><b>1.2</b> Functions in SSMSE</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#brief-description-of-the-ssmse-mse-simulation-procedure"><i class="fa fa-check"></i><b>1.3</b> Brief description of the SSMSE MSE simulation procedure</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#conditioning-the-om-and-sampling-from-the-om"><i class="fa fa-check"></i><b>1.3.1</b> Conditioning the OM and sampling from the OM</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#first-run-of-the-management-strategy-in-the-mse-simulation"><i class="fa fa-check"></i><b>1.3.2</b> First run of the management strategy in the MSE simulation</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#feedback-from-managment-strategy-into-om-extending-model-years"><i class="fa fa-check"></i><b>1.3.3</b> Feedback from Managment Strategy into OM: extending model years</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#subsequent-runs-of-the-management-strategy"><i class="fa fa-check"></i><b>1.3.4</b> Subsequent runs of the management strategy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="simple.html"><a href="simple.html"><i class="fa fa-check"></i><b>2</b> A simple example</a><ul>
<li class="chapter" data-level="2.1" data-path="simple.html"><a href="simple.html#setup-r-workspace-folders"><i class="fa fa-check"></i><b>2.1</b> Setup R workspace folders</a></li>
<li class="chapter" data-level="2.2" data-path="simple.html"><a href="simple.html#create-the-operating-models-oms"><i class="fa fa-check"></i><b>2.2</b> Create the operating models (OMs)</a></li>
<li class="chapter" data-level="2.3" data-path="simple.html"><a href="simple.html#examine-the-management-procedure-used"><i class="fa fa-check"></i><b>2.3</b> Examine the management procedure used</a></li>
<li class="chapter" data-level="2.4" data-path="simple.html"><a href="simple.html#adding-observation-error-specify-how-to-sample-data-from-the-operating-model-sample"><i class="fa fa-check"></i><b>2.4</b> Adding observation error: Specify how to sample data from the Operating model (#sample)</a></li>
<li class="chapter" data-level="2.5" data-path="simple.html"><a href="simple.html#adding-process-error-through-recruitment-deviations"><i class="fa fa-check"></i><b>2.5</b> Adding process error through recruitment deviations</a></li>
<li class="chapter" data-level="2.6" data-path="simple.html"><a href="simple.html#run-ssmse"><i class="fa fa-check"></i><b>2.6</b> Run SSMSE</a></li>
<li class="chapter" data-level="2.7" data-path="simple.html"><a href="simple.html#run_ssmse-output"><i class="fa fa-check"></i><b>2.7</b> run_SSMSE output</a></li>
<li class="chapter" data-level="2.8" data-path="simple.html"><a href="simple.html#performance-metrics"><i class="fa fa-check"></i><b>2.8</b> Performance metrics</a></li>
<li class="chapter" data-level="2.9" data-path="simple.html"><a href="simple.html#summarize-results"><i class="fa fa-check"></i><b>2.9</b> Summarize results</a></li>
<li class="chapter" data-level="2.10" data-path="simple.html"><a href="simple.html#example-mse-results"><i class="fa fa-check"></i><b>2.10</b> Example MSE Results</a></li>
<li class="chapter" data-level="2.11" data-path="simple.html"><a href="simple.html#delete-the-files"><i class="fa fa-check"></i><b>2.11</b> Delete the files</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="SSMSE.html"><a href="SSMSE.html"><i class="fa fa-check"></i><b>3</b> Options for run_SSMSE</a><ul>
<li class="chapter" data-level="3.1" data-path="SSMSE.html"><a href="SSMSE.html#scenarios-in-ssmse"><i class="fa fa-check"></i><b>3.1</b> Scenarios in SSMSE</a></li>
<li class="chapter" data-level="3.2" data-path="SSMSE.html"><a href="SSMSE.html#operating-model"><i class="fa fa-check"></i><b>3.2</b> Operating model</a></li>
<li class="chapter" data-level="3.3" data-path="SSMSE.html"><a href="SSMSE.html#the-management-strategyprocedure-including-estimation-method-em"><i class="fa fa-check"></i><b>3.3</b> The Management Strategy/procedure, including estimation method (EM)</a><ul>
<li class="chapter" data-level="3.3.1" data-path="SSMSE.html"><a href="SSMSE.html#specify-the-management-strategy-in-a-ss-model"><i class="fa fa-check"></i><b>3.3.1</b> Specify the Management Strategy in a SS model</a></li>
<li class="chapter" data-level="3.3.2" data-path="SSMSE.html"><a href="SSMSE.html#using-a-custom-management-strategyprocedure"><i class="fa fa-check"></i><b>3.3.2</b> Using a custom management strategy/procedure</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="SSMSE.html"><a href="SSMSE.html#sampling-options"><i class="fa fa-check"></i><b>3.4</b> Sampling options</a></li>
<li class="chapter" data-level="3.5" data-path="SSMSE.html"><a href="SSMSE.html#recruitment-deviations"><i class="fa fa-check"></i><b>3.5</b> Recruitment deviations</a></li>
<li class="chapter" data-level="3.6" data-path="SSMSE.html"><a href="SSMSE.html#implementation-error"><i class="fa fa-check"></i><b>3.6</b> Implementation error</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="helper.html"><a href="helper.html"><i class="fa fa-check"></i><b>4</b> Helper functions in SSMSE</a><ul>
<li class="chapter" data-level="4.1" data-path="helper.html"><a href="helper.html#devOM"><i class="fa fa-check"></i><b>4.1</b> Creating multiple operating models with <code>develop_OMs()</code></a></li>
<li class="chapter" data-level="4.2" data-path="helper.html"><a href="helper.html#scenlist"><i class="fa fa-check"></i><b>4.2</b> Set up sampling for a scenario with <code>create_sample_struct()</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="output.html"><a href="output.html"><i class="fa fa-check"></i><b>5</b> Output and Plots</a><ul>
<li class="chapter" data-level="5.1" data-path="output.html"><a href="output.html#summarizing-output"><i class="fa fa-check"></i><b>5.1</b> Summarizing output</a></li>
<li class="chapter" data-level="5.2" data-path="output.html"><a href="output.html#checking-estimation-model-convergence"><i class="fa fa-check"></i><b>5.2</b> Checking estimation model convergence</a></li>
<li class="chapter" data-level="5.3" data-path="output.html"><a href="output.html#calculating-performance-metrics"><i class="fa fa-check"></i><b>5.3</b> Calculating performance metrics</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="plotting-output-and-performance-metrics.html"><a href="plotting-output-and-performance-metrics.html"><i class="fa fa-check"></i><b>6</b> Plotting output and performance metrics</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SSMSE user manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="SSMSE" class="section level1">
<h1><span class="header-section-number">3</span> Options for run_SSMSE</h1>
<p>Many inputs are possible for the <code>run_SSMSE()</code> option. Here, we will describe some of the options available. For detailed documentation, type <code>?SSMSE::run_SSMSE()</code> into the R console.</p>
<div id="scenarios-in-ssmse" class="section level2">
<h2><span class="header-section-number">3.1</span> Scenarios in SSMSE</h2>
<p>Note that multiple scenarios can be called in <code>run_SSMSE()</code>, often through vector inputs to <code>run_SSMSE()</code>. Below, we will describe inputs needed to run 1 scenario.</p>
</div>
<div id="operating-model" class="section level2">
<h2><span class="header-section-number">3.2</span> Operating model</h2>
<p>The operating model (OM) for SSMSE should be a Stock Synthesis model. This could be any fitted Stock Synthesis model. There is one built-in OM that comes with SSMSE, which is a cod-like model. To use the cod model in run_SSMSE, set <code>OM_name_vec = "cod"</code>. Otherwise, the path to the OM model should be specified in <code>OM_in_dir_vec</code>.</p>
</div>
<div id="the-management-strategyprocedure-including-estimation-method-em" class="section level2">
<h2><span class="header-section-number">3.3</span> The Management Strategy/procedure, including estimation method (EM)</h2>
<p>The management strategy (and EM) can be specified in one of two ways:</p>
<ol style="list-style-type: decimal">
<li>Using an SS model</li>
<li>Using a custom procedure via a function in R</li>
</ol>
<p>In theory, any management strategy should work, as long as it can take the data file produced by the OM as output and provide back to SSMSE future catches.</p>
<div id="specify-the-management-strategy-in-a-ss-model" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Specify the Management Strategy in a SS model</h3>
<p>A stock synthesis model can be set up as the Estimation Method for the MSE. To use this option, specify <code>"EM"</code> as part of <code>MS_vec</code>. As with the OM, the built-in cod model could be used; just specify <code>"cod"</code> in the <code>EM_name_vec</code>. To use any other SS model as the EM, specify the path in <code>EM_in_dir_vec</code>.</p>
<p>Future catches will be determined from the forecasting file settings of the Stock Sythesis model. SSMSE will change the number of forecast years to match the number of years between assessments, but other specifications need to be made by the user.</p>
</div>
<div id="using-a-custom-management-strategyprocedure" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Using a custom management strategy/procedure</h3>
<p>Users can outline a custom managment strategy as an R function to use. As long as the correct inputs and outputs are used, any estimation method and management procedure can be used. For example, here is a simple function that just sets future catches as half the sampled catches in a specified year:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1">constant_catch_MS &lt;&lt;-<span class="st"> </span><span class="cf">function</span>(OM_dat, nyrs_assess, <span class="dt">catch_yr =</span> <span class="dv">100</span>, </a>
<a class="sourceLine" id="cb42-2" title="2">                              <span class="dt">frac_catch =</span> <span class="fl">0.5</span>, ...) { <span class="co"># need to include ... to allow function to work</span></a>
<a class="sourceLine" id="cb42-3" title="3">  <span class="co"># set catch the same as the previous year (sampled catch).</span></a>
<a class="sourceLine" id="cb42-4" title="4">  <span class="co"># catch is in the same units as the operating model, in this case it is in</span></a>
<a class="sourceLine" id="cb42-5" title="5">  <span class="co"># biomass.</span></a>
<a class="sourceLine" id="cb42-6" title="6">  catch &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb42-7" title="7">    <span class="dt">year =</span> (OM_dat<span class="op">$</span>endyr <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span>(OM_dat<span class="op">$</span>endyr <span class="op">+</span><span class="st"> </span>nyrs_assess), <span class="co"># the years to project the model forward</span></a>
<a class="sourceLine" id="cb42-8" title="8">    <span class="dt">seas =</span> <span class="dv">1</span>, <span class="co"># hard coded from looking at model </span></a>
<a class="sourceLine" id="cb42-9" title="9">    <span class="dt">fleet =</span> <span class="dv">1</span>,  <span class="co"># hard coded from looking at model</span></a>
<a class="sourceLine" id="cb42-10" title="10">    <span class="dt">catch =</span> OM_dat<span class="op">$</span>catch[OM_dat<span class="op">$</span>catch<span class="op">$</span>year <span class="op">==</span><span class="st"> </span>catch_yr, <span class="st">&quot;catch&quot;</span>]<span class="op">*</span>frac_catch,</a>
<a class="sourceLine" id="cb42-11" title="11">    <span class="dt">catch_se =</span> <span class="fl">0.05</span>) <span class="co"># hard coded from looking at model</span></a>
<a class="sourceLine" id="cb42-12" title="12">  catch_bio &lt;-<span class="st"> </span>catch <span class="co"># catch in biomass. In this case, catch is in biomass for both. Could also be left as NULL</span></a>
<a class="sourceLine" id="cb42-13" title="13">  catch_F &lt;-<span class="st"> </span><span class="ot">NULL</span> <span class="co"># catch in terms of F, can be left as NULL.</span></a>
<a class="sourceLine" id="cb42-14" title="14">  discards &lt;-<span class="st"> </span><span class="ot">NULL</span> <span class="co"># discards can be left as NULL if there are no discards</span></a>
<a class="sourceLine" id="cb42-15" title="15">  catch_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">catch =</span> catch,</a>
<a class="sourceLine" id="cb42-16" title="16">                     <span class="dt">catch_bio =</span> catch_bio, </a>
<a class="sourceLine" id="cb42-17" title="17">                     <span class="dt">catch_F =</span> catch_F,</a>
<a class="sourceLine" id="cb42-18" title="18">                     <span class="dt">discards =</span> discards)</a>
<a class="sourceLine" id="cb42-19" title="19">}</a></code></pre></div>
<p>This function can then be used in a call to <code>run_SSMSE()</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1"><span class="co"># define sample structure</span></a>
<a class="sourceLine" id="cb43-2" title="2">datfile &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;models&quot;</span>, <span class="st">&quot;cod&quot;</span>, <span class="st">&quot;ss3.dat&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;SSMSE&quot;</span>)</a>
<a class="sourceLine" id="cb43-3" title="3">sample_struct &lt;-<span class="st"> </span><span class="kw">create_sample_struct</span>(<span class="dt">dat =</span> datfile, <span class="dt">nyrs =</span> <span class="dv">6</span>) <span class="co"># note warning</span></a>
<a class="sourceLine" id="cb43-4" title="4">sample_struct<span class="op">$</span>lencomp &lt;-<span class="st"> </span><span class="ot">NULL</span> <span class="co"># don&#39;t use length sampling</span></a>
<a class="sourceLine" id="cb43-5" title="5"></a>
<a class="sourceLine" id="cb43-6" title="6"><span class="co"># run the SSMSE routine</span></a>
<a class="sourceLine" id="cb43-7" title="7">run_result_custom &lt;-<span class="st"> </span><span class="kw">run_SSMSE</span>(</a>
<a class="sourceLine" id="cb43-8" title="8">                              <span class="dt">scen_name_vec =</span> <span class="st">&quot;constant-catch&quot;</span>,</a>
<a class="sourceLine" id="cb43-9" title="9">                              <span class="dt">out_dir_scen_vec =</span> <span class="st">&quot;my_results&quot;</span>,</a>
<a class="sourceLine" id="cb43-10" title="10">                              <span class="dt">iter_vec =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb43-11" title="11">                              <span class="dt">OM_name_vec =</span> <span class="st">&quot;cod&quot;</span>,</a>
<a class="sourceLine" id="cb43-12" title="12">                              <span class="dt">OM_in_dir_vec =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb43-13" title="13">                              <span class="dt">MS_vec =</span> <span class="st">&quot;constant_catch_MS&quot;</span>, <span class="co"># use custom fun</span></a>
<a class="sourceLine" id="cb43-14" title="14">                              <span class="dt">use_SS_boot_vec =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb43-15" title="15">                              <span class="dt">nyrs_vec =</span> <span class="dv">6</span>,</a>
<a class="sourceLine" id="cb43-16" title="16">                              <span class="dt">nyrs_assess_vec =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb43-17" title="17">                              <span class="dt">rec_dev_pattern =</span> <span class="st">&quot;rand&quot;</span>, </a>
<a class="sourceLine" id="cb43-18" title="18">                              <span class="dt">scope =</span> <span class="st">&quot;2&quot;</span>,</a>
<a class="sourceLine" id="cb43-19" title="19">                              <span class="dt">impl_error_pattern =</span> <span class="st">&quot;none&quot;</span>, </a>
<a class="sourceLine" id="cb43-20" title="20">                              <span class="dt">run_EM_last_yr =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb43-21" title="21">                              <span class="dt">run_parallel =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb43-22" title="22">                              <span class="dt">sample_struct_list =</span> <span class="kw">list</span>(sample_struct),</a>
<a class="sourceLine" id="cb43-23" title="23">                              <span class="dt">seed =</span> <span class="dv">12345</span>)</a></code></pre></div>
</div>
</div>
<div id="sampling-options" class="section level2">
<h2><span class="header-section-number">3.4</span> Sampling options</h2>
<p>Currently, the only available sampling option is to use the bootstrapping module within SS itself. This means specifying <code>use_SS_boot_vec = TRUE</code>. Details on how sampling is done using the bootstrapping module in SS is available in the “Bootstrap Data Files” section of the <a href="https://vlab.noaa.gov/web/stock-synthesis/document-library/-/document_library/0LmuycloZeIt/view_file/11684231">SS user manual</a>.</p>
<p>Users also need to specify how and which data types should be sampled for each future year in the simulation in <code>sample_struct_list</code>. <code>sample_struct_list</code> is a list of lists. The first level is a list for each scenario; then, for the scenario, there is a list of dataframes, each of which specifying which years and fleets of data should be sampled in the future as well as which standard errors or sample sizes should be used.</p>
<p>The helper function <code>create_sample_struct()</code> can be used to help users generate the list of dataframes for a scenario. See an example of this function’s use in the <a href="#sample">simple example</a> or by typing <code>?SSMSE::create_sample_struct()</code> into the R console.</p>
</div>
<div id="recruitment-deviations" class="section level2">
<h2><span class="header-section-number">3.5</span> Recruitment deviations</h2>
<p>Future recruitment deviations to use in the simulation needs to be specified by the user. SSMSE can generate the recruitment deviations or users can specify them. The recruitment deviation pattern options (specified through <code>rec_dev_pattern</code>) are:</p>
<ul>
<li><code>"none"</code>: All future deviations set to 0.</li>
<li><code>"rand"</code>: Assign normally distributed random recruitment deviations. <code>rec_dev_pars</code> needs to be considered as well when using this option. If <code>rec_dev_pars = NULL</code>, then SSMSE will default to using the same standard deviation as the historic operating model and the sum of the recruitment deviations is allowed to diverge from zero is the nyrs_assess (rec_dev_pars = NULL is the same as specifying rec_dev_pars = c(nyrs_assess, 1), If other settings are deisred, the user can input a vector of two values to rec_dev_pars to specify the max number of years over which the sum of rec_devs can diverge from zero and a scalar multiplyer of standard deviation relative to the historic OM.</li>
<li><code>"AutoCorr_rand"</code>: Automatically calculates random auto-correlated rec-devs based on the distribution of historic deviations. Input a vector of two values to rec_dev_pars to specify the max number of years over which the sum of rec_devs can diverge from zero and a scalar multiplyer of standard deviation relative to the historic OM. if rec_dev_pars=NULL defaults to c(nyrs_assess, 1)</li>
<li><code>"AutoCorr_Spec"</code>: Generates auto-correlated recruitment deviations from an MA time-series model with user specified parameters.</li>
<li><code>"user"</code>: The user can specify a vector or (for multiple scenarios or iterations) matrix of recruitement deviations. This input should have the same length as <code>nyrs</code> for the scenario. The vector or matrix is specified in <code>rec_dev_pars</code>.</li>
</ul>
<p><em>In the future, some example specifications will be shown here to better illustrate the options</em></p>
</div>
<div id="implementation-error" class="section level2">
<h2><span class="header-section-number">3.6</span> Implementation error</h2>
<p>Management strategies that specify a total allowable catch are not always implemented perfectly. Thus, there are options in SSMSE to specify implementation error, where the true catch does not perfectly match the catch forecasted from the management strategy. The user can specify the future implementation error by using <code>impl_error_pattern</code>. Options are:</p>
<ul>
<li><code>"none"</code> (the default) - Assume there is no implementation error.</li>
<li><code>"rand"</code> - automatically assign achieved catch relative to expected catch as log normally distributed. Input a vector of <code>((nseas x nfleet x 2)+ 1)</code> values to impl_error_pars to specify the max number of years over which the achieved mean catch can diverge from the mean specified, the mean (default 1 such that achieved=expected), and the standard devation. If <code>impl_error__pars = NULL</code>, defaults to <code>c(nyrs_assess, rep(1,(nfleetxnseas)), rep(0,(nfleetxnseas)))</code>.</li>
<li><code>"user"</code> - applys a user input vector or matrix of implementation errors of length/columns equal to nyrs x nseas x Nfleets and rows based on assigned scope. Input the vector/matrix to <code>impl_error_pars</code>.</li>
</ul>
<p><em>In the future, some example specifications will be shown here to better illustrate the options</em></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="simple.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="helper.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
